# ğŸ“‹ Audit Complet â€“ PSA Immo Tool (Baseline Immobile)

## **1. RÃ©sumÃ© exÃ©cutif**

Cet audit est basÃ© **exclusivement** sur l'analyse des fichiers fournis dans la baseline.  
Aucune supposition ou extrapolation n'a Ã©tÃ© faite.  
Seuls les Ã©lÃ©ments rÃ©ellement prÃ©sents et identifiÃ©s comme **non utilisÃ©s** sont listÃ©s.

### **Constats principaux**
- Plusieurs **mÃ©thodes et classes Kotlin** existent mais ne sont **jamais appelÃ©es** dans le code.
- Des **ressources Android** (layouts, icÃ´nes, chaÃ®nes, arrays) sont prÃ©sentes mais **non rÃ©fÃ©rencÃ©es** dans le code ou les layouts.
- Certaines logiques sont **dupliquÃ©es** dans diffÃ©rents modules (CAN, export, permissions).
- La structure des dÃ©pendances montre des **modules isolÃ©s** non intÃ©grÃ©s dans le flux principal.

### **Objectif**
- Identifier les Ã©lÃ©ments inutilisÃ©s **rÃ©els** pour pouvoir les intÃ©grer ou nettoyer dans les futurs dÃ©veloppements.
- PrÃ©parer le terrain pour une utilisation complÃ¨te de toutes les fonctionnalitÃ©s disponibles.

## **2. Code Kotlin â€“ Ã‰lÃ©ments inutilisÃ©s**

| Ã‰lÃ©ment | Localisation | Ã‰tat | Explication | Proposition |
|---------|--------------|------|-------------|-------------|
| `VehicleCapabilitiesEditor` | `ui/VehicleCapabilitiesEditor.kt` | Classe non instanciÃ©e | PrÃ©vue pour Ã©dition des capacitÃ©s mais non branchÃ©e | Lâ€™intÃ©grer dans un futur menu â€œCapacitÃ©s vÃ©hiculeâ€ |
| `UiUpdater.autoScrollIfEnabled()` | `utils/UiUpdater.kt` | MÃ©thode inutilisÃ©e | PrÃ©vue pour le log CAN mais non appelÃ©e | Lier au recyclage du log CAN dans `DiagnosticsFragment` |
| `PermissionUtils.checkLocationPermission()` | `utils/PermissionUtils.kt` | MÃ©thode inutilisÃ©e | Gestion permission localisation non implÃ©mentÃ©e | IntÃ©grer dans `MainActivity` avant connexion Bluetooth |
| `PsaKeyCalculator.calculateKeyFromPin()` | `modules/PsaKeyCalculator.kt` | MÃ©thode inutilisÃ©e | PrÃ©vue pour calcul de clÃ© PIN mais non branchÃ©e | Ajouter dans le flux dâ€™authentification |
| `LogExporter.exportLogsAsText()` | `utils/LogExporter.kt` | MÃ©thode inutilisÃ©e | Version CSV utilisÃ©e Ã  la place | PrÃ©voir option dâ€™export texte dans `MainActivity` |

---

## **3. Ressources Android inutilisÃ©es**

### **Layouts**
- `res/layout/item_can_log.xml` â†’ jamais gonflÃ© (`inflate`) dans le code.

### **Drawables**
- `res/drawable/ic_car.xml` â†’ icÃ´ne jamais utilisÃ©e.
- `res/drawable/ic_exit.xml` â†’ icÃ´ne non utilisÃ©e.

### **Arrays**
- `baud_rates` (`arrays.xml`) â†’ non utilisÃ© dans prÃ©fÃ©rences ni code.
- `vehicle_types` (`arrays.xml`) â†’ non utilisÃ©.

### **ChaÃ®nes (`strings.xml`)**
*(Localisation + ligne exacte disponible dans la version dÃ©taillÃ©e finale)*
- `pref_autoscroll_title`
- `pref_autoscroll_summary`
- `pref_vehicle_title`
- `pref_vehicle_summary`
- `pref_theme_title`
- `pref_theme_summary`
- `pref_language_title`
- `pref_language_summary`
- `menu_exit`
- `dialog_confirm_exit`
- `toast_export_success`
- `toast_export_failure`
- `label_vehicle_editor`
- `label_capabilities_editor`
- `status_connected`
- `status_disconnected`

---

## **4. Redondances dÃ©tectÃ©es**
- **Gestion CAN** : plusieurs modules (`CanBusModule`, `GenericCanDemoModule`) rÃ©implÃ©mentent la mÃªme logique de parsing â†’ mutualisable.
- **Permissions** : vÃ©rifications redondantes dans `MainActivity` et `PermissionUtils`.
- **Export** : logique similaire entre `ReportGenerator` et `LogExporter`.

---

## **5. Carte des dÃ©pendances simplifiÃ©e (Mermaid)**

```mermaid
graph TD
    MainActivity --> DiagnosticsFragment
    MainActivity --> VehicleEditorActivity
    MainActivity --> SettingsActivity
    SettingsActivity --> SettingsFragment
    DiagnosticsFragment --> UiUpdater
    DiagnosticsFragment --> CanBusModule
    CanBusModule --> UsbCanInterface
    CanBusModule --> CanFrame
    Obd2UsbModule --> UsbCanInterface
    Obd2BluetoothModule --> CanCommunicationInterface
    KLineUsbModule --> CanCommunicationInterface
    VehicleManager --> VehicleCapabilities
    ReportGenerator --> VehicleManager
    LogExporter --> VehicleManager
